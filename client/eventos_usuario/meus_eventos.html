<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meus Eventos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" href="./meus_eventos.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:ital,wght@0,400..700;1,400..700&family=Mingzat&display=swap" rel="stylesheet">
</head>
<body>
  <nav class="navbar navbar-expand-lg" style="background-color: #A5D4FB; padding: 0;">
    <div class="container-fluid d-flex justify-content-between align-items-center">
        <!-- Logotipo -->
        <a class="navbar-brand" href="../home/home.html">
            <img src="../imagens/logo.png" alt="logomarca" width="55" height="auto" class="d-inline-block align-text-top" style="padding-left: 10px;">
        </a>
        
        <!-- Formulário de Pesquisa -->
        <form class="form-pesquisa" role="search">
            <div class="input-group">
                    <span class="input-group-text">
                    <i class="fas fa-search"></i>
                </span>
                <input class="form-control" type="search" placeholder="procurar..." id="searchBar" aria-label="Search">
            </div>
        </form>

        <!-- Ícones e Links -->
        <div class="d-flex align-items-center">

                            <!-- Eventos -->
                            <div class="icon-container text-center">
                                <a href="#" style="text-decoration: none; color: black;">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-calendar-event" viewBox="0 0 16 16" style="position: relative; top: 4px; margin-right:15px">
                                        <path d="M11 6.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5z"/>
                                        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"/>
                                      </svg>
                                    <div style="margin-right: 15px;">Eventos</div>
                                </a>
        </div>

            <!-- Carteira -->
            <div class="icon-container text-center me-3">
                <a href="../carteira/carteira.html" style="text-decoration: none; color: black;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" fill="currentColor" class="bi bi-cash-coin" style="position: relative; top: 4px;" viewBox="0 0 16 16">
                        <!-- SVG Paths -->
                        <path fill-rule="evenodd" d="M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8m5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0"/>
                        <path d="M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195z"/>
                        <path d="M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083q.088-.517.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1z"/>
                        <path d="M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 6 6 0 0 1 3.13-1.567"/>
                    </svg>                        
                    <div>Carteira</div>
                </a>
            </div>

            <!-- Log-out -->
            <div class="icon-container text-center">
                <a href="#" onclick="logout()" style="text-decoration: none; color: black;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-box-arrow-left" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0z"/>
                        <path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708z"/>
                    </svg>
                    
                    <div>Log-out</div>
                </a>
            </div>

        </div>
    </div>
</nav>
    <div class="container">
    <h1>Meus Eventos Criados</h1>
    <ul class="event-list" id="event-list">
      <!-- Os eventos serão renderizados aqui -->
    </ul>
    <a href="index.html" class="back-link">Voltar para a página inicial</a>
  </div>

  <script>
  // Função para buscar eventos criados pelo usuário
  async function fetchEventosCriados(userId) {
    try {
      const response = await fetch(`http://localhost:5000/userEvents/${userId}`, {
        method: "GET",
        headers: {
          "Content-Type": "application/json"
        }
      });

      if (response.ok) {
        const eventos = await response.json();
        return eventos;
      } else {
        console.error("Erro ao buscar eventos:", response.status);
        return [];
      }
    } catch (error) {
      console.error("Erro ao conectar com o servidor:", error);
      return [];
    }
  }

  // Função para renderizar os eventos na lista
  async function renderEventos(userId) {
    const eventList = document.getElementById("event-list");
    const eventosCriados = await fetchEventosCriados(userId);

    // Limpa a lista de eventos antes de renderizar
    eventList.innerHTML = "";

    if (eventosCriados.length === 0) {
      eventList.innerHTML = "<p>Nenhum evento criado até o momento.</p>";
      return;
    }

    eventosCriados.forEach(evento => {
      const eventItem = document.createElement("li");
      eventItem.className = "event-item";

      eventItem.innerHTML = `
        <h2>${evento.TITULO}</h2>
        <p><strong>Data:</strong> ${evento.DATA_EVENTO}</p>
        <p>${evento.DESCRICAO}</p>
        <p><strong>Data:</strong> ${evento.STATUS_EVENTO}</p>
        <div class="row">
          <div class="col-2 offset-0">
            <button type="button" class="btn btn-success btn-large" style="margin-left: 20px; margin-top: 15px;">
              Excluir Evento
            </button>
          </div>
          <div class="col-10">
              <!-- Espaço reservado para o restante do conteúdo -->
          </div>
        </div>
      `;

      eventList.appendChild(eventItem);
    });
  }

  // Chama a função para renderizar os eventos com o ID do usuário
  const userId = "1"; // Substitua pelo ID real do usuário
  renderEventos(userId);
  </script>
</body>
</html>